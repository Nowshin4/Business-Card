<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cart — Transparent Card</title>
<style>
:root{--bg:#07120f;--green:#14B37D;--lemon:#F7FF66;color:rgba(255,255,255,0.9);font-family:Inter,Arial}
body{margin:0;background:linear-gradient(180deg,#02120f,#07120f);min-height:100vh;color:var(--muted)}
.header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid rgba(255,255,255,0.03)}
.container{max-width:1000px;margin:22px auto;padding:0 6vw}
.table{width:100%;border-collapse:collapse}
.row{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.03);margin-bottom:10px}
.thumb{width:90px;height:60px;object-fit:cover;border-radius:8px}
.btn{padding:10px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--green),#1ecf93);color:#032118;font-weight:800;cursor:pointer}
.qty{width:64px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted)}
.summary{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
</style>
</head>
<body>
<header class="header">
  <div style="display:flex;gap:12px;align-items:center"><div style="width:44px;height:44px;border-radius:12px;background:linear-gradient(90deg,var(--green),var(--lemon));display:flex;align-items:center;justify-content:center;font-weight:800">TC</div><div><strong>Cart</strong><div style="font-size:12px;color:rgba(255,255,255,0.6)">Your items</div></div></div>
  <nav><a href="shop.html">Continue shopping</a></nav>
</header>

<main class="container">
  <h1 style="margin-top:6px">Your cart</h1>
  <div id="items"></div>

  <div style="display:flex;gap:14px; margin-top:14px; align-items:flex-start">
    <div style="flex:1">
      <div style="color:rgba(255,255,255,0.6)">Shipping & notes</div>
      <textarea id="note" style="width:100%;height:80px;background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px;border-radius:8px;color:var(--muted)"></textarea>
    </div>
    <div style="width:320px">
      <div class="summary">
        <div style="display:flex;justify-content:space-between"><div>Subtotal</div><div id="subtotal">$0</div></div>
        <div style="display:flex;justify-content:space-between;margin-top:8px"><div>Estimated tax</div><div id="tax">$0</div></div>
        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:12px 0">
        <div style="display:flex;justify-content:space-between;font-weight:800"><div>Total</div><div id="total">$0</div></div>
        <div style="margin-top:12px"><button class="btn" onclick="location.href='checkout.html'">Proceed to checkout</button></div>
      </div>
    </div>
  </div>
</main>

<footer style="margin-top:22px;padding:18px;border-top:1px solid rgba(255,255,255,0.03)"><div>© <span id="year"></span> Transparent Card</div></footer>

<script>
function getCart(){ try{return JSON.parse(localStorage.getItem('tc_cart')||'[]')}catch(e){return[]}}
function setCart(c){ localStorage.setItem('tc_cart', JSON.stringify(c)); renderCart(); }

function renderCart(){
  const items = getCart(); const wrap = document.getElementById('items'); wrap.innerHTML='';
  if(items.length===0){ wrap.innerHTML = '<div style="padding:24px;border-radius:12px;background:rgba(255,255,255,0.02);">Your cart is empty. <a href="shop.html">Shop now</a></div>'; updateSummary(); return; }
  items.forEach((it, idx)=>{
    const div = document.createElement('div'); div.className='row';
    const thumb = it.preview ? `<img src="${it.preview}" class="thumb">` : `<div style="width:90px;height:60px;border-radius:8px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center">Preview</div>`;
    div.innerHTML = `
      ${thumb}
      <div style="flex:1">
        <div style="font-weight:800">${it.id==='CUSTOM'?'Custom design':(it.id==='REPL'?'Replicated design':it.id)}</div>
        <div style="font-size:13px;color:rgba(255,255,255,0.6)">Qty: <input class="qty" type="number" value="${it.qty}" min="1" data-idx="${idx}"></div>
        <div style="font-size:13px;color:rgba(255,255,255,0.6);margin-top:6px">Options: ${it.opts?Object.values(it.opts).filter(Boolean).join(' • '):''}</div>
      </div>
      <div style="text-align:right">
        <div style="font-weight:800">$${(it.price*it.qty).toLocaleString()}</div>
        <button class="btn" data-remove="${idx}" style="margin-top:10px;background:#ff6b6b;color:white">Remove</button>
      </div>
    `;
    wrap.appendChild(div);
  });
  // attach events
  document.querySelectorAll('.qty').forEach(inp=>{
    inp.addEventListener('change', e=>{
      const i = Number(e.target.dataset.idx); const val = Math.max(1, Number(e.target.value)||1);
      const cart = getCart(); cart[i].qty = val; setCart(cart);
    });
  });
  document.querySelectorAll('[data-remove]').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const idx = Number(e.target.getAttribute('data-remove'));
      const cart = getCart(); cart.splice(idx,1); setCart(cart);
    });
  });
  updateSummary();
}

function updateSummary(){
  const items = getCart();
  const subtotal = items.reduce((s,i)=>s+i.price*i.qty,0);
  const tax = Math.round(subtotal*0.07);
  const total = subtotal + tax;
  document.getElementById('subtotal').textContent = '$'+subtotal.toLocaleString();
  document.getElementById('tax').textContent = '$'+tax.toLocaleString();
  document.getElementById('total').textContent = '$'+total.toLocaleString();
  document.getElementById('year').textContent = new Date().getFullYear();
  document.getElementById('cartCount') && (document.getElementById('cartCount').textContent = items.reduce((s,i)=>s+i.qty,0));
}

renderCart();
</script>
</body>
</html>
